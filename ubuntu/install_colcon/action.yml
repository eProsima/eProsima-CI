name: 'install_colcon'
description: 'Install colcon'

runs:
  using: composite
  steps:

    - name: Install colcon
      uses: eProsima/eProsima-CI/ubuntu/install_python_packages@main
      with:
        packages: 'setuptools==58.3.0 colcon-common-extensions colcon-mixin'
        upgrade: true

    - name: Download default colcon mixin
      shell: bash
      run: colcon mixin add default https://raw.githubusercontent.com/colcon/colcon-mixin-repository/master/index.yaml; colcon mixin update default

    - name: Remove undesired subpackages
      shell: bash
      run: |
        python3 -m pip uninstall -y colcon-powershell
